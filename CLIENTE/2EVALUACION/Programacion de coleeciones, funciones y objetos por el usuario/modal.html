<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Componente C: Modal</title>
<style>
    .overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .modal {
        background: white;
        padding: 20px;
        border-radius: 10px;
        min-width: 300px;
    }
</style>
</head>
<body>

<h1>Componente C: Modal</h1>

<button id="openBtn">Abrir Modal</button>

<template id="modalTemplate">
    <div class="overlay">
        <div class="modal">
            <h2>Introduce tu nombre</h2>

            <input type="text" id="nombreInput" placeholder="Escribe aquí tu nombre">
            <p id="textoNombre">Nombre ingresado: <b></b></p>

            <button class="close">Cerrar</button>
            <button class="close">Introduce nombre</button>

        </div>
    </div>
</template>

<script>
class Modal {
    constructor() {
        const tpl = document.getElementById("modalTemplate");
        this.element = tpl.content.firstElementChild.cloneNode(true);

        this.element.querySelector(".close").onclick = () => this.close();

        let timer; // Temporizador para retrasar la actualización

        this.element.querySelector("#nombreInput").addEventListener("input", (e) => {
            clearTimeout(timer); // Resetea el tiempo si sigue escribiendo

            timer = setTimeout(() => {
                this.element.querySelector("#textoNombre b").textContent = 
                    e.target.value || "—";
            }, 2000); 
        });

        this.element.querySelector(".openNested").onclick = () => {
            const modal2 = new Modal("Segundo Modal");
            modal2.open();
        };
    }
    

    open() {
        document.body.appendChild(this.element);
    }

    close() {
        document.body.removeChild(this.element);
    }
}

const modal = new Modal();
document.getElementById("openBtn").onclick = () => modal.open();
</script>

</body>
</html>
