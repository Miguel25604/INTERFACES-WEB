<!doctype html>
<html lang="es">
  <head>
    <title>Portafolio de Miguel</title>
    <meta charset="utf-8">
  </head>
  <body>
    <header>
      <h1>Portafolio de Miguel</h1>
      <p>Contacto:
        <a href="mailto:miguel.gavila@alu.ceacfp.es">miguel.gavila@alu.ceacfp.es</a> ·
        <a href="tel:+34900111222">+34 900 111 222</a>
      </p>
    </header>

    <main>
      <h2>Galería estática</h2>
      <section id="galeriaestatica">
        <img src="img1.jfif" alt="Descripción 1">
        <img src="img2.jfif" alt="Descripción 2">
        <img src="img3.jfif" alt="Descripción 3">
        <img src="img4.jfif" alt="Descripción 4">
        <img src="img5.jfif" alt="Descripción 5">
        <img src="img6.jfif" alt="Descripción 6">
      </section>
    </main>

    <style>
      /* === HEADER === */
      header{
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: white;
        color:rgba(129, 9, 99, 0.877);
        padding:20px;
        text-align:center;
        box-shadow:0px 4px 10px rgba(0,0,0,0.4);
      }
      header h1{
        margin:0;
        font-size:28px;
        letter-spacing:1px;
      }
      header p{
        margin-top:8px;
        font-size:16px;
      }
      header a{
        color:rgba(129, 9, 99, 0.877);
        text-decoration:none;
      }
      header a:hover{
        text-decoration:underline;
      }

      /* === CUERPO === */
      body{
        background:rgb(165, 165, 165);
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        margin:0;
      }
      main{
        padding:10px 20px;
      }
      h2{
        font-size:18px;
        color:white;
      }

      /* === GRID === */
      #galeriaestatica{
        display:grid;
        grid-template-columns:auto auto auto auto auto auto auto auto;
        gap:20px;
        margin-bottom:20px;
      }
      #galeriaestatica img{
        width:100%;
        height:180px;
        object-fit:cover;
        transition:all 1s;
        border-radius:5px;
        border:1px solid white;
        cursor:pointer;
        background:#111;
      }
      #galeriaestatica img:hover{
        transform:scale(1.1,1.1);
      }

      /* === MODAL === */
      #contenedormodal{
        position:fixed;
        width:100%;
        height:100%;
        background:rgba(0,0,0,0.5);
        top:0;
        left:0;
        display:none;
        align-items:center;
        justify-content:center;
        backdrop-filter: blur(5px);
      }
      #modal{
        width:800px;
        height:520px;
        background:white;
        padding:20px;
        border-radius:5px;
        box-shadow:0px 10px 20px black;
        text-align:center;
        display:flex;
        justify-content:space-between;
        align-items:center;
        position:relative;
      }
      #modal button{
        border:none;
        background:white;
        box-shadow:0px 2px 4px black;
        border-radius:100px;
        width:38px;
        height:38px;
        font-size:18px;
        cursor:pointer;
      }
      #contienepieza{
        width:100%;
        height:100%;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        gap:10px;
      }
      #contienepieza img{
        max-width:100%;
        max-height:85%;
        border-radius:6px;
      }
      #contienepieza p{
        margin:0;
        color:#333;
      }
      #cerrar{
        position:absolute;
        right:12px;
        top:12px;
        border:none;
        background:white;
        box-shadow:0px 2px 4px black;
        border-radius:100px;
        padding:6px 10px;
        font-size:14px;
        cursor:pointer;
      }

  
    </style>

    <!-- MODAL -->
    <div id="contenedormodal" tabindex="-1" aria-hidden="true">
      <div id="modal">
        <button id="anterior" title="Anterior">⬅</button>
        <div id="contienepieza">
          <img src="" alt="">
          <p id="pie"></p>
          <small id="contador" style="color:#666"></small>
        </div>
        <button id="siguiente" title="Siguiente">➡</button>
        <button id="cerrar" title="Cerrar">✖</button>
      </div>
    </div>

    <script>
      var imagen_activa = undefined;
      var lista_actual = [];

      // Abrir modal
      function abrirModalDesde(img, lista){
        imagen_activa = img;
        lista_actual = lista;
        document.querySelector("#contenedormodal").style.display = "flex";
        let origen = img.getAttribute("src");
        document.querySelector("#contienepieza img").setAttribute("src", origen);
        document.querySelector("#pie").textContent = img.getAttribute("alt") || "";
        actualizarContador();
      }

      function actualizarContador(){
        if(!lista_actual.length){ 
          document.querySelector("#contador").textContent = "";
          return;
        }
        var idx = Array.prototype.indexOf.call(lista_actual, imagen_activa);
        document.querySelector("#contador").textContent = (idx+1) + " / " + lista_actual.length;
      }

      // Galería estática
      function prepararEstatica(){
        let imgs = document.querySelectorAll("#galeriaestatica img");
        imgs.forEach(function(im){
          im.onclick = function(){ abrirModalDesde(this, imgs); }
        });
      }

      // Cerrar modal
      document.querySelector("#contenedormodal").onclick = function(e){
        if(e.target === this){ this.style.display = "none"; }
      }
      document.querySelector("#cerrar").onclick = function(e){
        e.stopPropagation();
        document.querySelector("#contenedormodal").style.display = "none";
      }

      // Navegación
      document.querySelector("#siguiente").onclick = function(event){
        if(!imagen_activa) return;
        var siguiente = imagen_activa.nextElementSibling;
        if(!siguiente){ siguiente = lista_actual[0]; }
        let origen = siguiente.getAttribute("src");
        document.querySelector("#contienepieza img").setAttribute("src", origen);
        document.querySelector("#pie").textContent = siguiente.getAttribute("alt") || "";
        imagen_activa = siguiente;
        actualizarContador();
        event.stopPropagation();
      }

      document.querySelector("#anterior").onclick = function(event){
        if(!imagen_activa) return;
        var anterior = imagen_activa.previousElementSibling;
        if(!anterior){ anterior = lista_actual[lista_actual.length - 1]; }
        let origen = anterior.getAttribute("src");
        document.querySelector("#contienepieza img").setAttribute("src", origen);
        document.querySelector("#pie").textContent = anterior.getAttribute("alt") || "";
        imagen_activa = anterior;
        actualizarContador();
        event.stopPropagation();
      }

      // Teclado
      window.addEventListener("keydown", function(e){
        var abierto = document.querySelector("#contenedormodal").style.display === "flex";
        if(!abierto) return;
        if(e.key === "Escape"){ document.querySelector("#contenedormodal").style.display = "none"; }
        if(e.key === "ArrowRight"){ document.querySelector("#siguiente").click(); }
        if(e.key === "ArrowLeft"){ document.querySelector("#anterior").click(); }
      });

      // Iniciar
      prepararEstatica();
    </script>
  </body>
</html>
